import 'package:flutter/material.dart';import 'package:flutter_spinkit/flutter_spinkit.dart';import 'package:weather_app/constants.dart';import 'package:weather_app/models/weather_data.dart';import 'package:weather_app/screens/weather_screen/weather_screen.dart';import 'package:weather_app/services/location.dart';import 'package:weather_app/services/networking.dart';import 'package:weather_app/services/weather_manager.dart';class LoadingScreen extends StatefulWidget {  @override  _LoadingScreenState createState() => _LoadingScreenState();}class _LoadingScreenState extends State<LoadingScreen> {  final WeatherManager weatherManager = WeatherManager();  double latitude;  double longitude;  @override  void initState() {    super.initState();    getLocation();  }  @override  Widget build(BuildContext context) {    return Scaffold(      body: Center(        child: SpinKitChasingDots(color: Colors.redAccent, size: 100,),      ),    );  }  void getLocation() async {    final location = Location();    await location.getCurrentLocation();    latitude = location.latitude;    longitude = location.longitude;    getWeatherData();  }  void getWeatherData() async {    final networkHelper = NetworkHelper('https://api.weatherbit.io/v2.0/current?'        'lat=$latitude&'        'lon=$longitude&'        'key=$kAPIKey'    );    final weatherData = await networkHelper.getData();    final data = WeatherData.fromMap(weatherData);    final media = weatherManager.getWeatherMedia(data?.code);    Navigator.push(      context,      MaterialPageRoute(        builder: (context) => WeatherScreen(data: data, media: media),      ),    );  }}